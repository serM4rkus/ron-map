<div class="map-selector">
  <header class="header">
    <img src="./ReadyOrMaps.png" alt="Ready or Maps Logo">
    <h2>Interactive Map</h2>
    <button class="about-btn" (click)="openAboutPage()">
      <span class="material-symbols-outlined">info_i</span>
      <span class="text">About</span>
    </button>
    <button class="steam-btn">
      <span><img src="./public/svg/steam-logo.svg" alt="Steam" class="steam-logo"></span>
      <a href="https://store.steampowered.com/app/1144200/Ready_or_Not/" target="_blank" rel="noopener noreferrer" class="steam-btn"></a>
    </button>
  </header>

  <div class=" map-info">
    @if (currentMap) {
    <h3>{{ translate(currentMap.name) }}</h3>
    <div class="divider"></div>
    <p>{{ currentMap.description }}</p>
    } @else {
    <h3>{{ translate('selectMap') }}</h3>
    <div class="divider"></div>
    <p>Choose a map from the dropdown below to begin exploring.</p>
    }
  </div>

  <h3 class="section-title">{{ translate('selectMap') }}</h3>
  <div class="map-dropdown">
    <div class="custom-dropdown" [class.open]="dropdownOpen" (click)="toggleDropdown($event)">
      <div class="dropdown-selected">
        <span>{{ currentMapMetadata ? translate(currentMapMetadata.name) : translate('selectMap') + '...' }}</span>
        <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </div>
      @if (dropdownOpen) {
      <div class="dropdown-menu" (click)="$event.stopPropagation()">
        <input type="text" class="dropdown-search" [placeholder]="translate('search')" [(ngModel)]="searchQuery"
          (input)="filterMaps()" (click)="$event.stopPropagation()" #searchInput />
        <div class="dropdown-options">
          @for (map of filteredMaps; track map.id) {
          <div class="dropdown-option" [class.selected]="currentMapId === map.id"
            [class.highlighted]="highlightedIndex === $index" (click)="selectMap(map.id)"
            (mouseenter)="highlightedIndex = $index">
            <span class="map-name">{{ translate(map.name) }}</span>
            @if (currentMapId === map.id) {
            <svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            }
          </div>
          }
          @if (filteredMaps.length === 0) {
          <div class="dropdown-empty">No maps found</div>
          }
        </div>
      </div>
      }
    </div>
  </div>
</div>